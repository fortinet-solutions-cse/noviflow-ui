<!DOCTYPE html>
<html>
<head>
    <title>FortiGate Scale Out Demo with NoviFlow</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<script>
$(function () {
    $('#totalthroughtput').highcharts({
        chart: {
            type: 'bar'
        },
        title: {
            text: ''
        },
		colors: ['#FF7200', '#AA7200', '#8bbc21', '#910000', '#1aadce',
    '#492970', '#f28f43', '#77a1e5', '#c42525', '#a6c96a'],
	
		legend: {
			enabled: true,
			floating: true,
			align: 'right',
			verticalAlign: 'top'
		},
        xAxis: {
            categories: ['40G A', '40G B']
        },
        yAxis: {
            title: {
                text: 'Bps'
            }
        },
        series: [{
            name: 'ingress',
            data: [17, 38]
        }, {
            name: 'egress',
            data: [16, 37]
        }],
    });
});




</script>
<script>
$(function () {
    $('#fgtthroughtput').highcharts({
        chart: {
            type: 'bar'
        },
		legend: {
			enabled: true
		},
        title: {
            text: ''
        },
        xAxis: {
            categories: ['FGT1', 'FGT2', 'FGT3','FGT4', 'FGT5', 'FGT6', 'FGT7', 'FGT8']
        },
        yAxis: {
            title: {
                text: 'Bps'
            }
		},
        series: [{
            name: 'ingress',
            data: [1.2, 8, 4.3, 3.5, 4.2, 6.2, 7, 3.4]
        }, {
            name: 'egress',
            data: [1.2, 7.5, 3.5, 3.5, 4.2, 5.4, 6.5, 3]
        }],
    });
});




</script>
<script>

$(function () {

var template = {
    chart: {
        type: 'gauge',
        plotBackgroundColor: null,
        plotBackgroundImage: null,
        plotBorderWidth: 0,
        plotShadow: false
    },

    title: {
        text: 'Host',
		margin:0
    },

    pane: {
        startAngle: -150,
        endAngle: 150,
        background: [{
            backgroundColor: {
                linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                stops: [
                    [0, '#FFF'],
                    [1, '#333']
                ]
            },
            borderWidth: 0,
            outerRadius: '109%'
        }, {
            backgroundColor: {
                linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                stops: [
                    [0, '#333'],
                    [1, '#FFF']
                ]
            },
            borderWidth: 1,
            outerRadius: '107%'
        }, {
            // default background
        }, {
            backgroundColor: '#DDD',
            borderWidth: 0,
            outerRadius: '105%',
            innerRadius: '103%'
        }]
    },

    // the value axis
    yAxis: {
        min: 0,
        max: 100,

        minorTickInterval: 'auto',
        minorTickWidth: 1,
        minorTickLength: 10,
        minorTickPosition: 'inside',
        minorTickColor: '#666',

        tickPixelInterval: 30,
        tickWidth: 2,
        tickPosition: 'inside',
        tickLength: 10,
        tickColor: '#666',
        labels: {
            step: 2,
            rotation: 'auto'
        },
        title: {
            text: '% CPU',
			margin: 0
        },

        plotBands: [{
            from: 0,
            to: 60,
            color: '#55BF3B' // green
        }, {
            from: 60,
            to: 75,
            color: '#DDDF0D' // yellow
        }, {
            from: 75,
            to: 100,
            color: '#DF5353' // red
        }]
    },

    series: [{
        name: 'CPU Load',
        data: [80],
        tooltip: {
            valueSuffix: ' %'
        }
    }]

};

var template_fgt = $.extend( true, {}, template);
template_fgt.chart.height='120%';
template_fgt.series.name='';
template_fgt.yAxis =  {
        min: 0,
        max: 100,

        minorTickInterval: 'auto',
        minorTickWidth: 1,
        minorTickLength: 10,
        minorTickPosition: 'outside',
        minorTickColor: '#666',

        tickPixelInterval: 50,
        tickWidth: 2,
        tickLength: 10,
        tickColor: '#766',
        labels: {
            step: 2,
            rotation: 'auto'
        },
        title: {
            text: '',
			margin: 0
        },
		labels: {
			enabled: false
		},
		showFirstLabel: false,
		showLastLabel: false,
        plotBands: [{
            from: 0,
            to: 60,
            color: '#55BF3B' // green
        }, {
            from: 60,
            to: 75,
            color: '#DDDF0D' // yellow
        }, {
            from: 75,
            to: 100,
            color: '#DF5353' // red
        }]
    };

// CPULoad1
var template1 = $.extend( true, {}, template);
template1.title.text = 'Host1';
$('#cpuload1').highcharts(template1);

// CPULoad2
var template2 = $.extend( true, {}, template);
template2.title.text = 'Host2';
$('#cpuload2').highcharts(template2);

// CPULoad3
var template3 = $.extend( true, {}, template);
template3.title.text = 'Host3';
$('#cpuload3').highcharts(template3);

// CPULoad4
var template4 = $.extend( true, {}, template);
template4.title.text = 'Host4';
$('#cpuload4').highcharts(template4);
	

// FGTLoad1
var template_fgt1 = $.extend( true, {}, template_fgt);
template_fgt1.title.text = 'FGT1';
$('#fgtload1').highcharts(template_fgt1);

// FGTLoad2
var template_fgt2 = $.extend(true, {}, template_fgt);
template_fgt2.title.text = 'FGT2';
$('#fgtload2').highcharts(template_fgt2);

// FGTLoad3
var template_fgt3 = $.extend(true, {}, template_fgt);
template_fgt3.title.text = 'FGT3';
$('#fgtload3').highcharts(template_fgt3);

// FGTLoad4
var template_fgt4 = $.extend(true, {}, template_fgt);
template_fgt4.title.text = 'FGT4';
$('#fgtload4').highcharts(template_fgt4);

// FGTLoad5
var template_fgt5 = $.extend(true, {}, template_fgt);
template_fgt5.title.text = 'FGT5';
$('#fgtload5').highcharts(template_fgt5);

// FGTLoad6
var template_fgt6 = $.extend(true, {}, template_fgt);
template_fgt6.title.text = 'FGT6';
$('#fgtload6').highcharts(template_fgt6);

// FGTLoad7
var template_fgt7 = $.extend(true, {}, template_fgt);
template_fgt7.title.text = 'FGT7';
$('#fgtload7').highcharts(template_fgt7);

// FGTLoad8
var template_fgt8 = $.extend(true, {}, template_fgt);
template_fgt8.title.text = 'FGT8';
$('#fgtload8').highcharts(template_fgt8);

});




</script>

<script>
$(function () {
var template_cpu_time = {
		chart: {
			type: 'line',
			animation: false
		},
		title: {
			text: 'Host1',
			align: 'center'

		},
		xAxis: {
			categories: ['15:31', '15:32', '15:33', '15:34', '15:35', '15:36', '15:37', '15:38', '15:39', '15:40'],
			tickInterval: 3

		},
		yAxis: {
			title: {
				text: '% CPU Load'
			},
			min: 0,
			max: 100,
			tickInterval: 50

		},
		legend: false,
		plotOptions: {
			line: {
			    animation: false,
				dataLabels: {
					enabled: false
				},
				enableMouseTracking: false
			}
		},
		series: [{
		    animation: false,
			data: [7.0, 6.9, 9.5, 14.5, 28.4, 31.5, 45.2, 56.5, 63.3, 58.3],
			marker: {
				enabled: false,
			}
		}]
	};

var template_cpu_time1 = $.extend( true, {}, template_cpu_time);
template_cpu_time1.title.text = "Host 1";
$('#cputime1').highcharts(template_cpu_time1);

var template_cpu_time2 = $.extend( true, {}, template_cpu_time);
template_cpu_time2.title.text = "Host 2";
template_cpu_time2.yAxis.title.text = '';
$('#cputime2').highcharts(template_cpu_time2);

var template_cpu_time3 = $.extend( true, {}, template_cpu_time);
template_cpu_time3.title.text = "Host 3";
template_cpu_time3.yAxis.title.text = '';
$('#cputime3').highcharts(template_cpu_time3);

var template_cpu_time4 = $.extend( true, {}, template_cpu_time);
template_cpu_time4.title.text = "Host 4";
template_cpu_time4.yAxis.title.text = '';
$('#cputime4').highcharts(template_cpu_time4);




var template_fgt_time = $.extend( true, {}, template_cpu_time);
template_fgt_time.colors = ['#3F30A0'];
template_fgt_time.series= [{  data: [17.0, 16.9, 19.5, 7.5, 18.4, 24.5, 42.2, 36.5, 27.3, 8.3],
			marker: {
				enabled: false,
			} }];

template_fgt_time.xAxis.tickInterval = 5;


var template_fgt_time1 = $.extend( true, {}, template_fgt_time);
template_fgt_time1.title.text = "FGT1";
$('#fgttime1').highcharts(template_fgt_time1);

var template_fgt_time2 = $.extend( true, {}, template_fgt_time);
template_fgt_time2.title.text = "FGT2";
template_fgt_time2.yAxis.title.text = '';
$('#fgttime2').highcharts(template_fgt_time2);

var template_fgt_time3 = $.extend( true, {}, template_fgt_time);
template_fgt_time3.title.text = "FGT3";
template_fgt_time3.yAxis.title.text = '';
$('#fgttime3').highcharts(template_fgt_time3);

var template_fgt_time4 = $.extend( true, {}, template_fgt_time);
template_fgt_time4.title.text = "FGT4";
template_fgt_time4.yAxis.title.text = '';
$('#fgttime4').highcharts(template_fgt_time4);

var template_fgt_time5 = $.extend( true, {}, template_fgt_time);
template_fgt_time5.title.text = "FGT5";
template_fgt_time5.yAxis.title.text = '';
$('#fgttime5').highcharts(template_fgt_time5);

var template_fgt_time6 = $.extend( true, {}, template_fgt_time);
template_fgt_time6.title.text = "FGT6";
template_fgt_time6.yAxis.title.text = '';
$('#fgttime6').highcharts(template_fgt_time6);

var template_fgt_time7 = $.extend( true, {}, template_fgt_time);
template_fgt_time7.title.text = "FGT7";
template_fgt_time7.yAxis.title.text = '';
$('#fgttime7').highcharts(template_fgt_time7);

var template_fgt_time8 = $.extend( true, {}, template_fgt_time);
template_fgt_time8.title.text = "FGT8";
template_fgt_time8.yAxis.title.text = '';
$('#fgttime8').highcharts(template_fgt_time8);

});


</script>


<script>
$(function () {
var template_total_throughput_time = {
		chart: {
			type: 'line'
		},
		title: {
			text: ''
		},
		xAxis: {
			categories: ['15:31', '15:32', '15:33', '15:34', '15:35', '15:36', '15:37', '15:38', '15:39', '15:40'],

		},
		yAxis: {
			title: {
				text: 'GBps'
			},
			min: 0,
			max: 40,
			tickInterval: 20
		},
		colors: ['#FF7200', '#AA7200', '#8bbc21', '#910000', '#1aadce',
            '#492970', '#f28f43', '#77a1e5', '#c42525', '#a6c96a'],
		legend: {
			layout: 'vertical',
			align: 'right',
			verticalAlign: 'middle'
		},
		plotOptions: {
			line: {
				dataLabels: {
					enabled: false
				},
				enableMouseTracking: false
			}
		},
		responsive: {
			rules: [{
				condition: {
					maxWidth: 500
				},
				chartOptions: {
					legend: {
						layout: 'horizontal',
						align: 'center',
						verticalAlign: 'bottom'
					}
				}
			}]
		},
		series: [{
			name: 'ingress',
			data: [7.0, 6.9, 9.5, 14.5, 18.4, 21.5, 25.2, 26.5, 23.3, 18.3],
			marker: {
				enabled: false,
			}
		}, {
			name: 'egress',
			data: [6.5, 6.2, 9.4, 12.5, 17.4, 20.2, 24.1, 25.5, 22.2, 16.2],
			marker: {
				enabled: false,
			}
		}]
	};

$('#totalthroughput_time').highcharts(template_total_throughput_time);

var template_fgt_throughput_time = {
		chart: {
			type: 'line'
		},
		title: {
			text: ''
		},
		xAxis: {
			categories: ['15:31', '15:32', '15:33', '15:34', '15:35', '15:36', '15:37', '15:38', '15:39', '15:40'],

		},
		yAxis: {
			title: {
				text: 'Mbps'
			},
			min: 0,
			max: 100,
			tickInterval: 50
		},
		legend: {
			layout: 'vertical',
			align: 'right',
			verticalAlign: 'middle'
		},
		plotOptions: {
			line: {
				dataLabels: {
					enabled: false
				},
				enableMouseTracking: false
			}
		},
		series: [{
			name: 'FGT1',
			data: [7.0, 6.9, 9.5, 14.5, 18.4, 21.5, 25.2, 26.5, 23.3, 18.3],
			marker: {
				enabled: false,
			}
		}, {
			name: 'FGT2',
			data: [51.0, 52.9, 54.5, 54.5, 38.4, 32.5, 25.2, 26.5, 13.3, 18.3],
			marker: {
				enabled: false,
			}
		}, {
			name: 'FGT3',
			data: [17.0, 82.9, 84.5, 84.5, 88.4, 82.5, 85.2, 86.5, 83.3, 88.3],
			marker: {
				enabled: false,
			}
		}, {
			name: 'FGT4',
			data: [21.0, 2.9, 4.5, 4.5, 8.4, 2.5, 15.2, 26.5, 23.3, 18.3],
			marker: {
				enabled: false,
			}
		}, {
			name: 'FGT5',
			data: [43.0, 42.9, 44.5, 44.5, 38.4, 32.5, 25.2, 26.5, 23.3, 18.3],
			marker: {
				enabled: false,
			}
		}, {
			name: 'FGT6',
			data: [11.0, 12.9, 14.5, 14.5, 18.4, 22.5, 35.2, 36.5, 33.3, 38.3],
			marker: {
				enabled: false,
			}
		}, {
			name: 'FGT7',
			data: [61.0, 62.9, 64.5, 64.5, 68.4, 62.5, 65.2, 66.5, 63.3, 68.3],
			marker: {
				enabled: false,
			}
		}, {
			name: 'FGT8',
			data: [71.0, 72.9, 74.5, 74.5, 78.4, 72.5, 65.2, 66.5, 63.3, 58.3],
			marker: {
				enabled: false,
			}
		}]
	};

$('#fgtthroughput_time').highcharts(template_fgt_throughput_time);

$( "#scalingout" ).click(function() {

  $('#scaleout_fgt').modal('toggle');

});

$( "#scalingin" ).click(function() {
  $('#scalein_fgt').modal('toggle');
});

function update_data()
{
  $.ajax({url: "http://localhost:5000/status", success: function(result){

    var parsedJSONResult = $.parseJSON(result);

    $('#cputime1').highcharts().series[0].setData(parsedJSONResult['cputime1'], true);
    $('#cputime2').highcharts().series[0].setData(parsedJSONResult['cputime2'], true);
    $('#cputime3').highcharts().series[0].setData(parsedJSONResult['cputime3'], true);
    $('#cputime4').highcharts().series[0].setData(parsedJSONResult['cputime4'], true);

  }});


};

setInterval(update_data, 1000);

});

</script>

<body>
<div class="container-fluid">
    <h1 class="text-center">FortiGate Scale Out with NoviFlow</h1>

    <div class="container" style="width:100%">
        <ul class="nav nav-pills">
            <li class="active"><a data-toggle="pill" href="#home">Dashboard</a></li>
            <li><a data-toggle="pill" href="#menu1">Snapshot</a></li>
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">Scaling
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="#">
                        <div id="scalingout">Scaling Out FortiGate</div>
                    </a></li>
                    <li><a href="#">
                        <div id="scalingin">Scaling In FortiGate</div>
                    </a></li>
                </ul>
            </li>
        </ul>

        <div class="tab-content">
            <div id="home" class="tab-pane fade in active">
                <div class="row">
                    <div class="panel panel-default">
                        <div class="panel-heading">CPU Load</div>
                        <div class="panel-body">
                            <div id="cputime1" style="width:24.9%; float:left; height:22vh;"></div>
                            <div id="cputime2" style="width:24.9%; float:left; height:22vh;"></div>
                            <div id="cputime3" style="width:24.9%; float:left; height:22vh;"></div>
                            <div id="cputime4" style="width:24.9%; float:left; height:22vh;"></div>

                            <div id="fgttime1" style="width:12.4%; float:left; height:24vh;"></div>
                            <div id="fgttime2" style="width:12.4%; float:left; height:24vh;"></div>
                            <div id="fgttime3" style="width:12.4%; float:left; height:24vh;"></div>
                            <div id="fgttime4" style="width:12.4%; float:left; height:24vh;"></div>
                            <div id="fgttime5" style="width:12.4%; float:left; height:24vh;"></div>
                            <div id="fgttime6" style="width:12.4%; float:left; height:24vh;"></div>
                            <div id="fgttime7" style="width:12.4%; float:left; height:24vh;"></div>
                            <div id="fgttime8" style="width:12.4%; float:left; height:24vh;"></div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-5">
                        <div class="panel panel-default">
                            <div class="panel-heading">Total Throughput</div>
                            <div class="panel-body">
                                <div id="totalthroughput_time" style="width:100%; float:left; height:25vh;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-7">
                        <div class="panel panel-default">
                            <div class="panel-heading">FortiGate Throughput</div>
                            <div class="panel-body">
                                <div id="fgtthroughput_time" style="width:100%; float:left; height:25vh;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="menu1" class="tab-pane fade">
                <div class="row">
                    <div class="panel panel-default">
                        <div class="panel-heading">Total Throughput</div>
                        <div class="panel-body" style="height:16vh;" id="totalthroughtput"/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="panel panel-default">
                            <div class="panel-heading">FortiGate Port Throughput</div>
                            <div class="panel-body" id="fgtthroughtput" style=""></div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="panel panel-default">
                            <div class="panel-heading">Load per Host and FortiGate</div>
                            <div class="panel-body">
                                <div style="width: 100%; float:right">
                                    <div id="cpuload1" style="width:24%; height:25vh; float:left"></div>
                                    <div id="cpuload2" style="width:24%; height:25vh; float:left"></div>
                                    <div id="cpuload3" style="width:24%; height:25vh; float:left"></div>
                                    <div id="cpuload4" style="width:24%; height:25vh; float:left"></div>
                                </div>
                                <div style="width: 100%; float:right">
                                    <div id="fgtload1" style="width:12%; float:left"></div>
                                    <div id="fgtload2" style="width:12%; float:left"></div>
                                    <div id="fgtload3" style="width:12%; float:left"></div>
                                    <div id="fgtload4" style="width:12%; float:left"></div>
                                    <div id="fgtload5" style="width:12%; float:left"></div>
                                    <div id="fgtload6" style="width:12%; float:left"></div>
                                    <div id="fgtload7" style="width:12%; float:left"></div>
                                    <div id="fgtload8" style="width:12%; float:left"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="scaleout_fgt" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Scaling out FortiGate</h4>
                </div>
                <div class="modal-body">
                    <p>Creating new instance</p>
                    <p>Configuring Switch</p>
                    <p>Redimensioning traffic</p>
                    <p id="result"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <!-- Modal -->
    <div id="scalein_fgt" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Scaling in FortiGate</h4>
                </div>
                <div class="modal-body">
                    <p>Removing instance</p>
                    <p>Configuring Switch</p>
                    <p>Redimensioning traffic</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

</body>

</html>
